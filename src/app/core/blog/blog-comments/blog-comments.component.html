<hr class="mt-2"/>

<div class="mx-4">
    <h2 class="text-2xl font-semibold text-gray-800 mt-6">Comments</h2>
  
    <div
    *ngIf="(isLoggedIn$ | async) === true"
    class="flex-col items-center mt-4 w-full">
        <textarea
        [(ngModel)]="comment"
        class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring focus:ring-indigo-300 mt-2"
        placeholder="Write a comment..."
    ></textarea>
        <button
        (click)="onComment()"
        class="bg-blue-500 px-3  self-end text-white py-3 rounded hover:bg-indigo-700 focus:outline-none focus:ring focus:ring-indigo-300 mt-2"
        [disabled]="!comment"
    >
        Comment
    </button>
    <hr class="my-4"/>
    </div>
<div *ngFor="let comment of comments" class="mx-4">
  <div class="flex items-center mt-4">
    <div class="w-8 h-8 rounded-full bg-gray-500 flex items-center justify-center">
      <span class="text-white text-md font-semibold">{{ comment.user.first_name.charAt(0) }}{{ comment.user.last_name.charAt(0) }}</span>
    </div>
    <div class="ml-3">
      <p class="text-gray-700 font-semibold">{{ comment.user.first_name }} {{ comment.user.last_name }}</p>
      <p class="text-gray-500 text-sm">{{ formatDate( comment.created_at) }}</p>
    </div>
  </div>
  <p class="mt-1">{{ comment.content }}</p>
  <hr 
    *ngIf="comment !== comments[comments.length - 1]"
  class="my-2"/>
</div>
</div>